# FormCraft – C4 Overview

## C1: Context
- **Primary actor:** Form designer (end user) in a web browser.
- **System:** FormCraft – a drag-and-drop form builder SPA.
- **External dependency:** Forms API (REST) to list/load/save/delete form definitions.

## C2: Containers
- **Browser SPA (React)**
  - UI for drag/drop builder, properties editing, preview, JSON import/export, code export (JSX/TSX, CodeSandbox launch).
- **Forms API (external, not in repo)**
  - Persists form definitions; accessed via `listForms`, `getForm`, `createForm`, `updateForm`, `deleteForm`.

## C3: Components (within the SPA)
- **Routing shell:** `App` with routes for Builder and Forms list.
- **Builder page:**
  - `Sidebar`: library of draggable elements/layouts.
  - `DroppableArea`: canvas drop zone rendering elements and column rows.
  - `EditSidebar`: properties panel for the selected element (labels, options, layouts, etc.).
  - **Header actions:** save/load/delete/clear/import/export/preview/code export.
  - `FormPreview`: modal preview of the built form.
  - Import/Export dialogs: JSON serialize/deserialize form elements.
  - Code export: generates JSX/TSX and opens CodeSandbox with the generated code.
- **State/helpers:**
  - Element CRUD/layout utils in `App.js` (create/update/remove, normalize columns, options editing).
  - Import/export normalization for nested column layouts.
  - Code generation helpers for JSX/TSX and sandbox payloads.
- **API client:** `src/api/forms.js` wraps HTTP calls to the Forms API.

## C4: Code (note)
- Leaf functions/utilities live in `src/App.js` (element creation, normalization, code generation for export), `src/components` for UI parts, and `src/api/forms.js` for server calls.

## ASCII sketches

**Context (C1)**
```
[Form Designer] --(browser)--> [FormCraft SPA] --(REST)--> [Forms API]
```

**Containers (C2)**
```
+---------------------+       +------------------+
| Browser / React SPA |<----->|   Forms API      |
| - Builder UI        |  REST | (external)       |
| - Preview           |       | - CRUD forms     |
| - Import/Export     |       +------------------+
| - Code Export       |
+---------------------+
```

**Components (C3) inside SPA**
```
[App Router]
  |- [Builder Page]
  |    |- Sidebar (draggables)
  |    |- DroppableArea (canvas + columns)
  |    |- EditSidebar (properties)
  |    |- Header actions (save/load/delete/clear/import/export/preview/code)
  |    |- FormPreview (modal)
  |    |- Import/Export dialogs
  |    |- Code export (JSX/TSX, CodeSandbox)
  |
  |- [FormsPage] (list/load forms)

State/helpers in App.js (element CRUD, normalize columns, options), api/forms.js (REST)
```
